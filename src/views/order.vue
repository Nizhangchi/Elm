<script setup lang="ts">
import { ref, onMounted } from 'vue';
import axios from 'axios';
import router from "@/router";

// å®šä¹‰è®¢å•æ•°æ®
const orders = ref([]);

// è¿”å›æŒ‰é’®é€»è¾‘
const returnIcon = () => {
  router.push('/personal');
}

// è·å–æ‰€æœ‰è®¢å•
const fetchOrders = async () => {
  try {
    const response = await axios.get('http://localhost:8080/customer/getAllOrdersByCsId', {
      params: {
        id: 1 // å‡è®¾å½“å‰ç”¨æˆ·çš„IDæ˜¯1ï¼Œå®é™…åº”ç”¨ä¸­åº”ä»ç™»å½•ä¿¡æ¯ä¸­è·å–
      }
    });
    if (response.data.code === 200) {
      orders.value = response.data.data; // å°†è·å–çš„è®¢å•æ•°æ®èµ‹å€¼ç»™ orders
    } else {
      console.error('è·å–è®¢å•å¤±è´¥');
    }
  } catch (error) {
    console.error('è·å–è®¢å•è¯·æ±‚å¤±è´¥', error);
  }
}

// åœ¨ç»„ä»¶æŒ‚è½½æ—¶è·å–è®¢å•
onMounted(() => {
  fetchOrders();
});
</script>
<template>
  <body>
  <div class="total">
    <div class="header">
      <div class="returnButton" @click="returnIcon" style="font-size: 20px"><</div>
      <div class="search-panel">
        <i style="padding-left: 3vw; font-size: 4vw;color: #999999;" >ğŸ”</i>
        <input style="outline: none;border: none;border-radius: 10px" type="text"/>
      </div>
      <div class="boxButton">ğŸ§°</div>
      <div class="moreButton"><i class="fa fa-ellipsis-h"></i></div>
    </div>
    <div class="orderType">
      <div class="orderTypeItem-selected">
        <div style="font-size: large" class="item-text">å…¨éƒ¨</div>
        <div style="color: #17BAF9;font-size: 10vw" class="decoration">â€”</div>
      </div>
      <div class="orderTypeItem">è¿›è¡Œä¸­</div>
      <div class="orderTypeItem">å¾…è¯„ä»·</div>
      <div class="orderTypeItem">é€€æ¬¾</div>
    </div>
    <div class="monthly">
      <div class="left-content"><span style="font-size: larger">6æœˆ</span> &nbsp;&nbsp;æ”¯å‡ºï¿¥<span style="font-size: larger;font-weight: bolder">97</span>.89</div>
      <div class="level">
        <img style="width: 10%;margin-left: 1vw" src="../assets/img/level.png">
        <div class="level-text">æœ¬æœˆå†²å‡»é“‚é‡‘è¿˜å·®100æˆé•¿å€¼</div> >
      </div>
    </div>
    <div class="orderCard">
      <div class="cardTitle">
        <div class="shop-picture"><img style="width: 100%" src="../assets/img/business/è…Šæ’éª¨1.png"></div>
        <div class="shop-details">
          <div class="shop-name">
            æ­£å®—ä¸½æ±Ÿè…Šæ’éª¨ &nbsp;>
            <div class="condition">è¿›è¡Œä¸­</div>
          </div>
          <div class="shop-discount">
            <div class="discount1">&nbsp;7å…ƒæ— é—¨æ§›&nbsp;</div>
            <div class="discount2">&nbsp;38å‡3&nbsp;</div>
          </div>
        </div>
      </div>
      <div class="card-content">
        <div class="left-content">
          <div class="picture">
            <img style="width: 35%" src="../assets/img/business/è…Šæ’éª¨2.png">
            <img style="width: 35%" src="../assets/img/business/è…Šæ’éª¨3.png">
          </div>
          <div class="date">2024-06-07 19:27:39</div>
        </div>
        <div class="right-content">
          <div class="price">ï¿¥<span style="font-size: larger">20</span>.44</div>
          <div class="count">å…±2ä»¶</div>
        </div>
      </div>
      <div class="card-bottom">å†æ¥ä¸€å•</div>
    </div>
    <div class="orderCard">
      <div class="cardTitle">
        <div class="shop-picture"><img style="width: 100%" src="../assets/img/business/1..logo.png"></div>
        <div class="shop-details">
          <div class="shop-name">
            ä¸€ç‚¹ç‚¹(æ˜†æ˜å¤§å­¦åŸåº—) &nbsp;>
            <div class="condition">å·²é€è¾¾</div>
          </div>
          <div class="shop-discount">
            <div class="discount1">&nbsp;6å…ƒæ— é—¨æ§›&nbsp;</div>
          </div>
        </div>
      </div>
      <div class="card-content">
        <div class="left-content">
          <div class="picture">
            <img style="width: 35%" src="../assets/img/business/1..15.png">
            <img style="width: 35%" src="../assets/img/business/1..11.png">
          </div>
          <div class="date">2024-06-05 17:16:29</div>
        </div>
        <div class="right-content">
          <div class="price">ï¿¥<span style="font-size: larger">28</span></div>
          <div class="count">å…±2ä»¶</div>
        </div>
      </div>
      <div class="card-bottom">å†æ¥ä¸€å•</div>
    </div>
    <div class="orderCard2">
      <div class="cardTitle">
        <div class="shop-picture"><img style="width: 100%" src="../assets/img/business/yaojiwang.jpg"></div>
        <div class="shop-details">
          <div class="shop-name">
            çª‘é¸¡ç‹(æ˜†æ˜æ˜¥èè¡—åº—) &nbsp;>
            <div class="condition">å·²é€è¾¾</div>
          </div>
          <div class="shop-discount">
            <div class="discount3">&nbsp;è¶…å‡ºé…é€èŒƒå›´&nbsp;</div>
          </div>
        </div>
      </div>
      <div class="card-content">
        <div class="left-content">
          <div class="picture">
            <img style="width: 35%" src="../assets/img/business/chicken.png">
            <div class="food-text">æ‹›ç‰Œçª‘é¸¡â˜…â˜… åŠåª-åŸå‘³</div>
          </div>

          <div class="date">2024-06-07 19:27:39</div>
        </div>
        <div class="right-content">
          <div class="price">ï¿¥<span style="font-size: larger">35</span>.4</div>
          <div class="count">å…±2ä»¶</div>
        </div>
      </div>
      <div class="recommendMore">
        <div class="recommend"><i class="fa-solid fa-shop"></i> <span style="font-weight: bolder">æ›´å¤šæ¨è</span> <span style="color:#999999;">|</span> çª‘é¸¡ç‹(æ˜†æ˜å¤§å­¦åŸåº—)</div>
        <div class="goto">å»çœ‹çœ‹&nbsp;></div>
      </div>
    </div>
    <div class="orderCard2">
      <div class="cardTitle">
        <div class="shop-picture"><img style="width: 100%" src="../assets/img/business/goodme_logo.png"></div>
        <div class="shop-details">
          <div class="shop-name">
            å¤èŒ—(åŒ—å¤§è¡—åº—) &nbsp;>
            <div class="condition">å·²é€è¾¾</div>
          </div>
          <div class="shop-discount">
            <div class="discount3">&nbsp;è¶…å‡ºé…é€èŒƒå›´&nbsp;</div>
          </div>
        </div>
      </div>
      <div class="card-content">
        <div class="left-content">
          <div class="picture">
            <img style="width: 35%" src="../assets/img/business/goodme.png">
            <img style="width: 35%" src="../assets/img/business/goodme2.png">
          </div>

          <div class="date">2024-06-07 19:27:39</div>
        </div>
        <div class="right-content">
          <div class="price">ï¿¥<span style="font-size: larger">26</span></div>
          <div class="count">å…±2ä»¶</div>
        </div>
      </div>
      <div class="recommendMore">
        <div class="recommend"><i class="fa-solid fa-shop"></i> <span style="font-weight: bolder">æ›´å¤šæ¨è</span> <span style="color:#999999;">|</span> å¤èŒ—(æ—¶ä»£ä¿Šå›­åº—)</div>
        <div class="goto">å»çœ‹çœ‹&nbsp;></div>
      </div>
    </div>
  </div>
  </body>

</template>

<style scoped>
.total{
  width: 100%;
  height: 320vw;
  background-color: #f5fcfc;
}
.total .header{
  display: flex;
  flex-direction: row;
  height: 14vw;
  align-items: center;
  justify-content: space-around;
  font-weight: lighter;
  position: fixed;
  background-color: #f5fcfc;
  width: 100%;
  top: 0;
}
.total .header .returnButton{
  margin-left: 3vw;
}
.total .header .search-panel{
  width: 65%;
  height: 80%;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
}
.total .header .search-panel input{
  width: 100%;
  height: 50%;
}
.total .header .search-panel i{
  margin-right: -5vw;
  z-index: 9;
  font-size: 5vw;
}
.total .header .boxButton i,
.total .header .moreButton i{
  font-size: 5vw;
  margin-right: 2vw;
}
/*è®¢å•ç±»å‹*/
.total .orderType{
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  height: 10vw;
  width: 100%;
  position: fixed;
  top: 14vw;
  background-color: #f5fcfc;
}
.total .orderType .orderTypeItem-selected{
  display: flex;
  flex-direction: column;
  align-items: center;
  font-weight: bold;
}
.total .orderType .orderTypeItem-selected .decoration{
  margin-top: -4vw;
}
/*æ¯æœˆè®°è´¦æ */
.total .monthly{
  width: 100%;
  height: 8vw;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-top: 24vw;
}
.total .monthly .left-content{
  margin-left: 3vw;
  font-size: 3.8vw;
}
.total .monthly .level{
  margin-left: auto;
  width: 58%;
  height: 60%;
  display: flex;
  flex-direction: row;
  align-items: center;
  font-size: 3.5vw;
  border-radius: 10px;
  background-color: #fdfef9;
}
.total .monthly .level .level-text{
  margin-right: 1vw;
  margin-left: 1vw;
}
.total .monthly .level i{
  font-size: 3vw;
  color: #999999;
}
/*è®¢å•å¡ç‰‡*/
.total .orderCard{
  border-radius: 8px;
  width: 95%;
  margin-left: 2vw;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  background-color: white;
  height: 65vw;
  margin-top: 3vw;
  margin-bottom: 2vw;
}
.total .orderCard2{
  border-radius: 8px;
  width: 95%;
  margin-left: 2vw;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  background-color: white;
  height: 80vw;
  margin-top: 3vw;
  margin-bottom: 2vw;
}
.total .cardTitle{
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 2vw;
  margin-top: 3vw;
}
.total .cardTitle .shop-picture{
  width: 15%;
}
.total .cardTitle .shop-details{
  width: 100%;
  height: 12vw;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  margin-left: 2vw;
}
.total .cardTitle .shop-details .shop-name {
  display: flex;
  flex-direction: row;
  align-items: center;
  font-size: 4.5vw;
}
.total .cardTitle .shop-details .shop-name .condition{
  display: flex;
  flex-direction: row;
  margin-left: auto;
  font-size: 4vw;
  font-weight: lighter;
  color: #9F9F9F;
  margin-right: 3vw;
}
.total .cardTitle .shop-details .shop-discount {
  display: flex;
  flex-direction: row;
  align-items: center;
  font-size: 3.5vw;
}
.total .cardTitle .shop-details .shop-discount .discount1{
  border-radius: 5px;
  border: #bfbea0 1px solid;
  color: #8c7250;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 4.3vw;
}
.total .cardTitle .shop-details .shop-discount .discount2{
  border: #fb664f 1px solid;
  color: #fb664f;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 1vw;
  height: 4.3vw;
}
.total .cardTitle .shop-details .shop-discount .discount3{
  background-color:#959394;
  color: white;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 1vw;
  height: 5vw;
}

.total .card-content{
  width: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-top: 3vw;
}
.total .card-content .left-content{
  display: flex;
  flex-direction: column;
  margin-left: 2vw;
}
.total .card-content .left-content .picture{
  display: flex;
  flex-direction: row;
  width: 85%;
}
.total .card-content .left-content .picture img{
  margin-left: 1vw;
}
.total .card-content .left-content .picture .food-text{
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  font-size: 3.8vw;
}
.total .orderCard .card-content .left-content .date{
  color: #9F9F9F;
  font-size: 3.8vw;
  margin-top: 2vw;
}
.total .card-content .right-content{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-right: 3vw;
}
.total .card-content .right-content .price {
  font-weight: bolder;
}
.total .card-content .right-content .count{
  font-size: 3.5vw;
  color: #9F9F9F;
  margin-top: 3vw;
}
.total .card-bottom{
  display: flex;
  align-items: center;
  justify-content: center;
  height: 8.5vw;
  border: 1px #17BAF9 solid;
  color: #17BAF9;
  border-radius: 20px;
  margin-left: auto;
  margin-right: 3vw;
  margin-bottom: 3vw;
  width: 23%;
}
.total .recommendMore{
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 2vw;
  margin-right: 3vw;
}
.total .recommendMore .goto{
  color: #9F9F9F;
  font-size: smaller;
  margin-left: auto;
}
</style>